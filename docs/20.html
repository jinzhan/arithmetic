<!DOCTYPE html>
<html>

<head>
    <title>20以内加减法</title>
    <style>
        table {
            width: 100%;
            padding: 0;
            margin: 0;
        }

        table td {
            width: 25%;
            text-align: left;
            padding: 0;
            margin: 0;
            font-size: 18px;
            line-height: 32px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div id="app"></div>

    <script>
        function plus(max, min, complex) {
            const firstNum = Math.max(((Math.random() * max) | 0) + 1, min);
            const secondNum = ((Math.random() * (max - firstNum)) | 0) + 1;
            if (complex &&  (firstNum + secondNum < 12))) {
                return plus(max, min, true);
            }
            return `${firstNum} + ${secondNum} = `;
        };

        function subtract(max, min=0, complex) {
            const firstNum = Math.max(((Math.random() * max) | 0) + 1, min);
            const secondNum = ((Math.random() * firstNum) | 0) + 1;
            if (complex && (firstNum === secondNum || secondNum < 3)) {
                return subtract(max, min, true);
            }
            return `${firstNum} - ${secondNum} = `;
        };
    </script>

    <script>
        const formula = () => {
            const isOdd = (Math.random()*100 | 0) % 2;
            return isOdd ? plus(20, 1, true) : subtract(20, 10, true);
        };

        let html = [
            '<table>'
        ];

        let num = 1000;

        for(let i = 0; i < num; ++i) {
            html.push('<tr>');
            html.push('<td>' + formula() +  '</td>');
            html.push('<td>' + formula() +  '</td>');
            html.push('<td>' + formula() +  '</td>');
            html.push('<td>' + formula() +  '</td>');
            html.push('</tr>');
        }

        html.push('</table>');

        document.getElementById('app').innerHTML = html.join('');
    </script>
    
</body>

</html>
